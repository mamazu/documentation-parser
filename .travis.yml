language: php

dist: bionic

php:
  - '7.1'
  - '7.2'
  - '7.3'
  - '7.4'

cache:
  directories:
    - ~/.composer/cache/files

install: composer update --no-interaction

script:
  - composer validate --strict

  - vendor/bin/phpstan analyse
  - vendor/bin/phpspec run --format dot -vvv --no-interaction
  - "set -e"
  - (! (php bin/doc-parser.php bin/example.md)) || exit 1
  - 'set +e'
